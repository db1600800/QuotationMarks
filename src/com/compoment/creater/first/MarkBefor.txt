<%@ page contentType="text/html; charset=GBK" pageEncoding="gb2312"%>
<%@taglib uri="/WEB-INF/tld/struts-logic.tld" prefix="logic"%>
<%@taglib uri="/WEB-INF/tld/struts-bean.tld" prefix="bean"%>
<%@taglib uri="/WEB-INF/tld/struts-html.tld" prefix="html"%>
<%@page import="com.gdpost.cbp.basedata.sellerman.bm.SellerManSubVo"%>
<%@ include file="/gdpost/common/taglibs.jsp"%>
<%@ include file="/gdpost/common/meta.jsp"%>
<%@ page import="org.apache.struts.util.LabelValueBean"%>

<%
/**
*调用4451550主交易
*/
 %>

<html>
	<head>
		<link href="/css/inside.css" type="text/css" rel="stylesheet">
		<title>新增商家理信息</title>
		
		<script type="text/javascript"
			src="/gdpost/pub/combotree/js/xtree2.js"></script>
		<script type="text/javascript"
			src="/gdpost/pub/combotree/js/xloadtree2.js"></script>
		<script type="text/javascript"
			src="/gdpost/pub/combotree/js/treeselect.js"></script>
		<link type="text/css" rel="stylesheet"
			href="/gdpost/pub/combotree/css/xtree2.css" />
		<link type="text/css" rel="stylesheet"
			href="/gdpost/pub/combotree/css/treeselect.css" />
		<script src="/js/validation.js"></script>
		
<script>
function save()
{
	//var d44_70_cstmanager = document.getElementById("d44_70_cstmanagersa");
	
	var d44_70_merchant_name = document.getElementsByName("d44_70_merchant_name")[0].value;
		var d44_70_longstatus = document.getElementsByName("d44_70_longstatus")[0].value;

	var d44_70_dealbrchno = document.getElementsByName("d44_70_dealbrchno")[0].value;
	var d44_70_dealbrchname = document.getElementsByName("d44_70_dealbrchname")[0].value;
	
	var d44_70_mc_type_desc = document.getElementsByName("d44_70_mc_type_desc")[0].value;
	
	var d44_70_linkman = document.getElementsByName("d44_70_linkman")[0].value;
	
	var d44_70_telephone = document.getElementsByName("d44_70_telephone")[0].value; 
	
	
	var d44_70_bx_insurant_address = document.getElementsByName("d44_70_bx_insurant_address")[0].value;

	if(d44_70_merchant_name == "")
	{
		alert("商家名称不能为空！");
		return;
	}
	else if(d44_70_longstatus == "")
	{
		alert("商家状态不能为空！");
		return;
	}else if(d44_70_dealbrchno == ""){
		alert("所属机构不能为空！");
		return;
	}else if(d44_70_linkman == ""){
		alert("联系人不能为空！");
		return;
	}else if(d44_70_telephone == ""){
		alert("联系电话不能为空！");
		return;
	}
	else
	{
	var parm =d44_70_merchant_name+"|"+d44_70_linkman+"|"+d44_70_telephone+"|"+d44_70_dealbrchno+"|"+d44_70_dealbrchname+"|"+d44_70_bx_insurant_address+"|"+d44_70_longstatus+"|"+d44_70_mc_type_desc+"|";

	var mform = document.forms[0];
	mform.action="/gd/sellermanaction.do?method=add&parm="+parm;
	
	mform.submit();
	}
}
function mySubmit(){

}

function createbrchtree(index)
		{
			var tree1 = new WebFXTree("Root");
   			tree1.add(new WebFXLoadTreeItem("机构列表", "/gd/tree.do?method=getSubBrchNodes&treename="+index)); 
   			tree1.showRootNode = false; 
   			tree1.showRootLines = false; 
			CreateTreeSelect(index,tree1,"","",200);
		}
		
		//点击节点
		function selNode(id,name,treename)
		{ 
			var vf=eval("document.all.ValueField_"+treename); 
			var tf=eval("document.all.TextField_"+treename);
			//alert(id);
			//alert(treename);
			//alert(document.getElementsByName('d44_70_citycoe')[treename]);
			document.getElementsByName('d44_70_dealbrchno')[treename].value = id;
			document.getElementsByName('d44_70_dealbrchname')[treename].value = name;
			vf.value= id;
			tf.value=name;
 			var tDiv=document.all["TreeDiv_"+treename];
 			tDiv.style.display='none'; 
		}
		
		//设置默认选择的值
		function setTreeSelValue(index)
		{
			var value = document.getElementsByName('d44_70_dealbrchno')[index].value;
			var name = document.getElementsByName('d44_70_dealbrchname')[index].value;
			setTreeSelectValue(index,value,name);
		}
		function changemode()
		{
			//var selects = document.getElementsByName("d44_70_cityorgan")(rowi);
				var rowi = "0";
		    	var tdid = "treetd"+rowi;
		    	
		    	var treetd = document.getElementById(tdid);
		    	var tree1 = new WebFXTree("Root");
   				tree1.add(new WebFXLoadTreeItem("机构列表", "/gd/tree.do?method=getSubBrchNodes&treename="+rowi)); 
   				tree1.showRootNode = false; 
   				tree1.showRootLines = false; 
				treetd.innerHTML = CreateTreeSelectHtml(rowi,tree1,"","",200);
				//setTreeSelValue(rowi);
		    
		}

</script>
	</head>
	<body onload="">
		<table width="100%" border="0" cellspacing="0" cellpadding="0">
			<tr>
				<td class="tit_info3">  
					新增商家信息 
				</td>
			</tr>
		</table>
		<html:form action="/gd/sellermanaction.do?method=alt" styleId="SellerManActionForm" method="post" >
		
			<table align="center"  border="0" cellpadding="0" cellspacing="0" class="tab_mid" style="width:600px"  id="edittable">
				<tr>
					<td nowrap  class="tab_td2"  style="text-align:left">商家名称: </td>
						<td nowrap class="tab_td" width="80px">
									<html:text name="SellerManActionForm" property="d44_70_merchant_name" size="15" maxlength="12" />
								</td>
								
								<td nowrap  class="tab_td2"  style="text-align:left">商家状态: </td>
								<td nowrap class="tab_td" width="80px">
								
								
								<html:select name="SellerManActionForm"
										property="d44_70_longstatus">
									
										<html:optionsCollection name="SellerManActionForm"
											property="d44_70_longstatus_list" />
								</html:select>
							  </td>
					</tr>
					
					<tr>
					
						
					
			
				
						
								<td nowrap  class="tab_td2"  style="text-align:left">商家描述: </td>
						<td nowrap class="tab_td" width="80px">
							<html:text name="SellerManActionForm"   property="d44_70_mc_type_desc"   size="15" maxlength="12" />
								</td>
								
									<td nowrap  class="tab_td2"  style="text-align:left">所属机构: </td>

									<td id="<%="treetd"+"0"%>" nowrap class="tab_td"></td>
								</tr>
					
						<tr>
						<td nowrap  class="tab_td2"  style="text-align:left">联系人: </td>
						<td nowrap class="tab_td" width="80px">
									<html:text name="SellerManActionForm" property="d44_70_linkman"  size="15" maxlength="12" />
								</td>
								<td nowrap  class="tab_td2"  style="text-align:left">联系电话: </td>
						<td nowrap class="tab_td" width="80px">
									<html:text  name="SellerManActionForm"   property="d44_70_telephone"   size="15" maxlength="12" />
									
									
								</td>
								</tr>
					
					<tr>
						<td nowrap  class="tab_td2"  style="text-align:left">联系地址: </td>
						<td nowrap class="tab_td" width="180px"><br>
						<html:text name="SellerManActionForm" property="d44_70_bx_insurant_address"  size="15" maxlength="120" />
								<br></td>
								
								</tr>
				
					
					<tr>
							<td  colspan="4" class="tab_td" align="center" >
							<input type="button" value="保存" name="btn" 
								onmouseover="this.style.cursor='hand'" class="btn" 
								onclick="save()" style="margin-right:50px"/>
							<input class="btn" type="button" onmouseover="this.style.cursor='hand'"
								onclick="history.go(-1)"
								value="返回" style="margin-right:50px"/>
							</td>
					</tr>
					
					
			</table>
			
				<input type="hidden"  name="d44_70_dealbrchname" />
										<input type="hidden"  name="d44_70_dealbrchno"/>
							
							
		</html:form>
		<script language="javascript">           
			    var rowi = 0;
		    	var tdid = "treetd"+rowi;
		    	var treetd = document.getElementById(tdid);
		    	var tree1 = new WebFXTree("Root");
   				tree1.add(new WebFXLoadTreeItem("机构列表", "/gd/tree.do?method=getSubBrchNodes&treename="+rowi)); 
   				tree1.showRootNode = false; 
   				tree1.showRootLines = false; 
				treetd.innerHTML = CreateTreeSelectHtml(rowi,tree1,"","",200);
				setTreeSelValue(rowi);
		</script>
	</body>
</html>

